<xml>
    <!-- PROSPERO TOOLS -->
    <set name="CXX" value="${PS5_PAYLOAD_SDK}/bin/prospero-clang++" />
    <set name="HXCPP_CPP11" value="1" unless="HXCPP_NO_CPP11" />

    <include name="toolchain/gcc-toolchain.xml"/>

    <compiler id="prospero" exe="${CXX}">
        <exe name="${CXX}" if="CXX" />
        <flag value="-c"/>
        <flag value="-fvisibility=hidden"/>
        <cppflag value="-frtti"/>
        <cppflag value="-std=c++11" if="HXCPP_CPP11" />
        <cppflag value="-std=c++17" if="HXCPP_CPP17"/>
        <flag value="-g" if="debug"/>
        <!-- <flag value="-O2" unless="debug"/> --> <!-- Do not use because prospero is buggy -->
        <flag value="-fpic"/>
        <flag value="-fPIC"/>
        <flag value='-D__ORBIS__'/>
		<flag value='-D_WCHAR_T'/>
        <!-- <flag value='-I.'/> -->
        <flag value='-w'/>
        <flag value="-Wno-overflow" />
        <cppflag value="-Wno-invalid-offsetof" />
        <!-- <flag value="-DHX_LINUX"/> -->
        <flag value="-DHXCPP_MULTI_THREADED" if="HXCPP_MULTI_THREADED"/>
        <flag value="-DHXCPP_BIG_ENDIAN" if="HXCPP_BIG_ENDIAN"/>
        <flag value="-DHXCPP_THREAD_INFO_PTHREAD" />
        <include name="toolchain/common-defines.xml" />
        <flag value="-I${HXCPP}/include"/>
        <objdir value="obj/prospero${OBJEXT}/"/>
        <outflag value="-o"/>
        <ext value=".o"/>
    </compiler>

    <linker id="exe" exe="/opt/ps5-payload-sdk/bin/prospero-lld">
        <exe name="${CXX}" if="CXX" />
        <fromfile value="" if="GCC_OLD" />
        <flag value="-debug" if="debug"/>
        <flag value="-lkernel" />
        <flag value="-lkernel_sys" />
		<flag value="-lSceSystemService" />
		<flag value="-lSceUserService" />
        <lib name="-ldl"/>
        <ext value=""/>
        <outflag value="-o "/>
    </linker>
</xml>